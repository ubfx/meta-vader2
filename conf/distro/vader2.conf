DISTRO = "vader2"
DISTRO_NAME = "Vader2"
DISTRO_VERSION = "0.2.0"
DISTRO_CODENAME = "gatesgarth"

SDK_VERSION = "${@d.getVar('DISTRO_VERSION').replace('snapshot-${DATE}', 'snapshot')}"

MAINTAINER = "Felix Schneider <felix@fx-schneider.de>"

LOCALCONF_VERSION = "1"

DISTRO_VERSION[vardepsexclude] = "20210413"
SDK_VERSION[vardepsexclude] = "20210413"

DISTRO_EXTRA_RDEPENDS += "packagegroup-core-buildessential \
    packagegroup-core-ssh-openssh \
    packagegroup-core-boot \
    openssh-scp \
    openssh-sftp-server \
    ca-certificates \
    cmake \
    curl \
    dosfstools \
    file \
    git \
    gzip \
    ifupdown \
    iptables \
    iputils \
    mmc-utils \
    ncurses \
    net-tools \
    perf \
    tar \
    time \
    tree \
    unzip \
    update-rc.d \
    wget \
    which \
    wilc \
    wilc3000-fw \
    zip \
    wpa-supplicant \
    wifi-autostart \
    sudo \
    devmem2 \
    sudo \
    fpga-manager-script \
    clang \
    htop \
    xz \
"

DISTRO_EXTRA_RRECOMMENDS += "kernel-module-af-packet"

DISTRO_FEATURES ?= "${DISTRO_FEATURES_DEFAULT} largefile"

SDK_NAME = "${DISTRO}-${TCLIBC}-${SDKMACHINE}-${IMAGE_BASENAME}-${TUNE_PKGARCH}-${MACHINE}"
SDKPATH = "/opt/${DISTRO}/${SDK_VERSION}"

BBFILE_PRIORITY_vader2-layer = "10"

INHERIT += "reproducible_build"

BB_SIGNATURE_HANDLER ?= "OEEquivHash"
BB_HASHSERVE ??= "auto"

PREFERRED_PROVIDER_virtual/boot-bin = "xilinx-bootbin"

PREFERRED_RPROVIDER_qemu-native = "qemu-xilinx-native"
PREFERRED_PROVIDER_qemu-native = "qemu-xilinx-native"

PREFERRED_RPROVIDER_nativesdk-qemu = "nativesdk-qemu-xilinx"
PREFERRED_PROVIDER_nativesdk-qemu = "nativesdk-qemu-xilinx"

PRE_BOOTENV += "setenv bootargs isolcpus=1,2,3"